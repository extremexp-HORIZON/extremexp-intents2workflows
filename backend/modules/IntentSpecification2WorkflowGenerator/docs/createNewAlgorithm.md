# Add a new algorithm to the ontology

## Information needed


* Algorithm name  (k-means, dbscan, etc.)
* Task that the algorithm solves (classification, clustering, normalization, etc.)
* Input objects (data, model, etc.) and order of injection 
* Input objects preconditions (normalized data, splitted, no null, etc.)
* Output objects (data, model, etc.) and order of ejection
* Output objects postconditions (normalized data, splitted, no null, etc.)
* Extra parameters the algorithm needs a part from data or models (random seed, etc.) [optional]
* Implementation engine


## Steps

1. Choose one engine from [`ontology_populator/implementations/`](../ontology_populator/implementations/) or [implement a new one](./addNewEngine.md)
2. Create a new file on: `ontology_populator/implementations/<chosen enigne>/algorithm_name.py`.
3. In that file create, at least, one implementation and one component. You must use the component and implementation definitions specific to the engine being used. Use an existing script as a template. NOTE: Split shapes must be the first one defined among all preprocessing shapes. NOTE2: all the learner implementations should have the word Learner in the name field
    * When specifying input requirements, it is possible to add the importance level of each shape. The importance levels are:
        * Level 0 (**CRITICAL**): If the requirement is not met, the algorithm cannot be executed.
        * Level 1 (**MAJOR**): If the requriement is not met, the algorithm can be executed without problems, but the quality of the results produced is **severely** affected.
        * Level 2 (**MINOR**): If the requriement is not met, the algorithm can be executed without problems, but the quality of the results produced is **slightly** affected.
    
    The following code chunk shows an example of input shapes that an implementation could have. Input requirements can be instanciated with a tuple containing the shape and its  importance level. Alternatively, the shape can directly be instanciated. In this case, the importance level is assumed to be 0 (**Critical**).
    ```python
    input=[
        [cb.NonNullTabularDatasetShape, (cb.NormalizedTabularDatasetShape,1)],
    ]
    ```

4. Update `ontology_populator/implementations/<chosen enigne>/__init__.py` accordingly
5. Modify [`ontology_populator/cbox_generator.py`](../ontology_populator/cbox_generator.py). You should update:
    * ```add_algorithms()```: Add the new algorithm referenced by the implementation and the problem it solves.
    * ```add_models()```: Add the new model types generated by the new algorithm, if any.
    * ```add_shapes()```: Add new shapes specified on the implementation and component functions if they are not present in the current ontology.
6. Execute the following command to regenerate the cbox:
    ```bash
    python cbox_generator.py
    ```
7. Overwrite [`ontologies/cbox.ttl`](../ontologies/cbox.ttl) with the newly generated one (it should be automatically done)
